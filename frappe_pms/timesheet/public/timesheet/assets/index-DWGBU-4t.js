var Ge=Object.defineProperty,Ie=Object.defineProperties;var Ue=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var ue=(a,s,t)=>s in a?Ge(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,_=(a,s)=>{for(var t in s||(s={}))he.call(s,t)&&ue(a,t,s[t]);if(Q)for(var t of Q(s))pe.call(s,t)&&ue(a,t,s[t]);return a},I=(a,s)=>Ie(a,Ue(s));var A=(a,s)=>{var t={};for(var r in a)he.call(a,r)&&s.indexOf(r)<0&&(t[r]=a[r]);if(a!=null&&Q)for(var r of Q(a))s.indexOf(r)<0&&pe.call(a,r)&&(t[r]=a[r]);return t};import{c as ve,j as e,F as j,P as ye,u as de,e as q,T as x,Q as oe,m as M,r as c,M as We,N as $e,O as Ve,X as ce,R as Ne,d as we,a as be,b as xe,U as ze,p as O,i as B,B as U,V as _e,W as ke,L as qe,t as Be,Y as Je,Z as Qe,_ as Xe,g as fe,q as je,$ as ge,a0 as Ye,a1 as Ke,a2 as Ze,a3 as es,a4 as ss,G as ts,H as as,I as rs,J as ls,K as ns,a5 as os,a6 as cs}from"./index-C1dL3-sP.js";import{s as is,P as ds,v as ms,O as Se,w as Ce,x as us,y as Te,z as Fe,B as hs,R as ps,E as xs,G as fs,u as js,D as gs,k as vs,a as ys,c as Ns,F as ws,d as bs,e as _s,f as ks,g as Ss,T as Cs,h as Ts,j as Fs,t as Ds,H as Rs,C as ae,I as ie,A as As,n as Es,o as Ps,q as Hs,J as Ls}from"./form-BOwT1959.js";import{S as me,T as De,e as Re,c as J,f as S,C as Os,a as Ms,b as Gs,d as X}from"./input-CYSuPJFJ.js";import{TimeInput as Is}from"./employeeDetail-CBbE15sC.js";import{u as re}from"./queryParam-CcAovJGT.js";/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.408.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=ve("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]),Ws=ye("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ne(r){var n=r,{className:a,variant:s}=n,t=A(n,["className","variant"]);return e.jsx("div",_({className:j(Ws({variant:s}),a)},t))}const $s=({employee:a})=>{const s=de(o=>o.team),{data:t,isLoading:r}=q("timesheet_enhancer.api.team.get_timesheet_for_employee",{employee:a,date:s.weekDate});if(r)return e.jsx(me,{});const n=t==null?void 0:t.message.data[Object.keys(t==null?void 0:t.message.data)[0]],u=t==null?void 0:t.message.holidays,i=t==null?void 0:t.message.leaves;return e.jsx("div",{children:e.jsx(De,{children:e.jsxs(Re,{children:[i.length>0&&e.jsx(zs,{dates:n.dates,holidays:u,leaves:i}),Object.keys(n.tasks).length==0&&e.jsx(Vs,{dates:n.dates,holidays:u}),Object.keys(n.tasks).length>0&&Object.entries(n.tasks).map(([o,g])=>{let y=0;return e.jsxs(J,{className:"border-b border-slate-200 flex w-full",children:[e.jsxs(S,{className:"max-w-md w-full",children:[e.jsx(x,{variant:"p",className:"text-slate-800",children:o}),e.jsx(x,{variant:"small",className:"text-slate-500",children:g.project_name})]}),n.dates.map(N=>{const F=g.data.find(C=>oe(C.from_time)===N);F&&F.hours&&(y+=F.hours);const w=u.includes(N);return e.jsx(Ae,{date:N,data:F,isHoliday:w,disabled:!0})}),e.jsxs(S,{className:j("max-w-24 w-full flex justify-between items-center",!g.is_billable&&"justify-end"),children:[g.is_billable==!0&&e.jsx(is,{className:"stroke-success w-4 h-4"}),e.jsx(x,{variant:"p",className:"text-slate-800 font-medium",children:M(y)})]})]},o)})]})})})},Vs=({dates:a,holidays:s,onCellClick:t})=>e.jsxs(J,{className:"flex",children:[e.jsx(S,{className:"w-full max-w-md",children:e.jsx(x,{variant:"p",className:"text-destructive",children:"Add Task"})}),a.map(r=>{const n=s.includes(r),u={date:r,hours:"",description:"",isUpdate:!1,name:"",parent:"",task:""};return e.jsx(Ae,{date:r,data:u,isHoliday:n,onCellClick:t,disabled:!0})}),e.jsx(S,{className:"w-full max-w-24 text-left"})]}),Ae=({date:a,data:s,isHoliday:t,onCellClick:r,disabled:n})=>{const[u,i]=c.useState(!1),o=n||(s==null?void 0:s.docstatus)===1,g=()=>{var w,C,R,H,k;if(o||!s)return;const F={date:a,hours:(w=s==null?void 0:s.hours)!=null?w:"",description:(C=s==null?void 0:s.description)!=null?C:"",isUpdate:(s==null?void 0:s.hours)>0,name:(R=s==null?void 0:s.name)!=null?R:"",parent:(H=s==null?void 0:s.parent)!=null?H:"",task:(k=s==null?void 0:s.task)!=null?k:""};r&&r(F)},y=()=>{o||i(!0)},N=()=>{o||i(!1)};return e.jsx(We,{children:e.jsxs(S,{onMouseEnter:y,onClick:g,onMouseLeave:N,className:j("max-w-20 w-full text-center",o&&"cursor-default",u&&"bg-slate-100 text-center cursor-pointer"),children:[e.jsxs($e,{className:j("h-full",o&&"cursor-default"),children:[!u&&e.jsx(x,{variant:"p",className:j("text-slate-600",t||o&&"text-slate-400"),children:s!=null&&s.hours?M((s==null?void 0:s.hours)||0):"-"}),u&&(s==null?void 0:s.hours)&&(s==null?void 0:s.hours)>0&&e.jsx(ds,{className:"text-center",size:16}),u&&!(s!=null&&s.hours)&&e.jsx(ms,{className:"text-center",size:16})]}),(s==null?void 0:s.description)&&e.jsx(Ve,{className:"whitespace-pre text-left max-w-72 text-wrap",children:s==null?void 0:s.description})]},a)})},zs=({leaves:a,dates:s,holidays:t})=>{let r=0;const n=s.map(i=>{if(t.includes(i))return{date:i,isHoliday:!0};const o=a.find(y=>i>=y.from_date&&i<=y.to_date),g=o!=null&&o.half_day&&(o==null?void 0:o.half_day_date)==i?4:8;return o&&(r+=g),{date:i,data:o,hour:g,isHoliday:!1}});return n.some(({data:i,isHoliday:o})=>i||o)?e.jsxs(J,{className:"flex",children:[e.jsx(S,{className:"w-full min-w-md text-left max-w-md",children:e.jsx(x,{variant:"p",className:"text-slate-800 w-full",children:"Time Off"})}),n.map(({date:i,data:o,hour:g,isHoliday:y})=>e.jsx(S,{className:"max-w-20 min-w-20 w-full text-center",children:e.jsx(x,{variant:"p",className:y?"text-white":"text-warning",children:o?M(g):""})},i)),e.jsx(S,{className:"max-w-24 w-full items-center justify-end flex",children:e.jsx(x,{variant:"p",className:"text-slate-800 font-medium text-right",children:M(r)})})]}):null},qs=ps,Bs=hs,Ee=c.forwardRef((r,t)=>{var n=r,{className:a}=n,s=A(n,["className"]);return e.jsx(Se,I(_({className:j("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a)},s),{ref:t}))});Ee.displayName=Se.displayName;const Js=ye("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Pe=c.forwardRef((u,n)=>{var i=u,{side:a="right",className:s,children:t}=i,r=A(i,["side","className","children"]);return e.jsxs(Bs,{children:[e.jsx(Ee,{}),e.jsxs(Ce,I(_({ref:n,className:j(Js({side:a}),s)},r),{children:[t,e.jsxs(us,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});Pe.displayName=Ce.displayName;const He=t=>{var r=t,{className:a}=r,s=A(r,["className"]);return e.jsx("div",_({className:j("flex flex-col space-y-2 text-center sm:text-left",a)},s))};He.displayName="SheetHeader";const Le=t=>{var r=t,{className:a}=r,s=A(r,["className"]);return e.jsx("div",_({className:j("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a)},s))};Le.displayName="SheetFooter";const Oe=c.forwardRef((r,t)=>{var n=r,{className:a}=n,s=A(n,["className"]);return e.jsx(Te,_({ref:t,className:j("text-lg font-semibold text-foreground",a)},s))});Oe.displayName=Te.displayName;const Qs=c.forwardRef((r,t)=>{var n=r,{className:a}=n,s=A(n,["className"]);return e.jsx(Fe,_({ref:t,className:j("text-sm text-muted-foreground",a)},s))});Qs.displayName=Fe.displayName;const Me=c.forwardRef((u,n)=>{var i=u,{className:a,orientation:s="horizontal",decorative:t=!0}=i,r=A(i,["className","orientation","decorative"]);return e.jsx(Ne,_({ref:n,decorative:t,orientation:s,className:j("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",a)},r))});Me.displayName=Ne.displayName;const Xs=()=>{const{toast:a}=we(),s=de(d=>d.team),[t,r]=c.useState(),[n,u]=c.useState(0),[i,o]=c.useState("Per Day"),[g,y]=c.useState([]),[N,F]=c.useState([]),[w,C]=c.useState([]),R=be(),{call:H}=xe("timesheet_enhancer.api.team.update_timesheet_status"),{call:k}=xe("timesheet_enhancer.api.timesheet.save"),{data:E,isLoading:W}=ze("Timesheet",{fields:["docstatus","start_date"],filters:[["start_date",">=",s.dateRange.start_date],["start_date","<=",s.dateRange.end_date],["employee","=",s.employee]]}),Y=d=>{k(d).then(p=>{a({variant:"success",description:p.message}),Z()}).catch(p=>{const m=O(p);a({variant:"destructive",description:m})})},{data:D,isLoading:K,error:$,mutate:Z}=q("timesheet_enhancer.api.timesheet.get_timesheet_data",{employee:s.employee,start_date:s.weekDate,max_week:1}),V=()=>{R(_e({dateRange:{start_date:"",end_date:""},employee:"",isAprrovalDialogOpen:!1})),R(ke(!0))},ee=()=>{const d={dates:w,status:"Approved",employee:s.employee};H(d).then(p=>{a({variant:"success",description:p.message}),V()}).catch(p=>{const m=O(p);a({variant:"destructive",description:m})})},se=d=>{const p={dates:w,status:"Rejected",employee:s.employee,note:d};H(p).then(m=>{a({variant:"success",description:m.message}),V()}).catch(m=>{const T=O(m);a({variant:"destructive",description:T})})},te=d=>{C(p=>p.includes(d)?p.filter(m=>m!==d):[...p,d])};return c.useEffect(()=>{if(D&&(F(D.message.leaves),y(D.message.holidays),r(D.message.data[Object.keys(D.message.data)[0]]),u(D.message.working_hour),o(D.message.working_frequency)),$){const d=O($);a({variant:"destructive",description:d})}},[D,$]),c.useEffect(()=>{if(t&&E){const d=E.filter(m=>m.docstatus==1).map(m=>m.start_date),p=t.dates.filter(m=>{const T=N.some(P=>m>=P.from_date&&m<=P.to_date&&P.half_day==!1);return!d.includes(m)&&!g.includes(m)&&!T});C(p!=null?p:[])}},[g,N,t,E]),e.jsxs(qs,{open:s.isAprrovalDialogOpen,onOpenChange:V,modal:!0,children:[(K||W)&&e.jsx(me,{}),t&&e.jsxs(Pe,{className:"sm:max-w-4xl overflow-auto",children:[e.jsx(He,{children:e.jsxs(Oe,{children:["Week of ",B(s.dateRange.start_date).date," -",B(s.dateRange.end_date).date]})}),e.jsxs("div",{className:"flex flex-col gap-y-4 mt-6",children:[e.jsx("div",{children:t.dates.map((d,p)=>{const m=Object.entries(t.tasks).flatMap(([f,G])=>G.data.filter(z=>oe(z.from_time)===d).map(z=>I(_({},z),{taskName:f,projectName:G.project_name})));let T=m.reduce((f,G)=>f+G.hours,0);const P=w.includes(d),l=g.includes(d),h=E==null?void 0:E.some(f=>f.start_date===d&&f.docstatus===1),v=N.find(f=>d>=f.from_date&&d<=f.to_date),b=!!(v!=null&&v.half_day&&(v==null?void 0:v.half_day_date)==d);v&&!l&&(b?T+=4:T+=8);const L=qe(T,n,i);return e.jsxs("div",{className:"flex flex-col ",children:[e.jsxs("div",{className:"bg-gray-100  p-1 border-b flex items-center gap-x-2",children:[e.jsx(xs,{disabled:h||l&&m.length==0||v&&!b&&!l,checked:P||h||b,className:j(h&&"data-[state=checked]:bg-success border-success"),onCheckedChange:()=>te(d)}),e.jsxs(x,{variant:"p",className:j(L==0&&"text-destructive",L&&"text-success",L==2&&"text-warning"),children:[M(T),"h"]}),e.jsx(x,{variant:"p",children:B(d).date}),l&&e.jsx(x,{variant:"p",className:"text-gray-600",children:"(Holiday)"}),v&&!l&&e.jsxs(x,{variant:"p",className:"text-gray-600",children:["(",b?"Half day leave":"Full Day Leave",")"]})]}),m==null?void 0:m.map((f,G)=>{const z={name:f.name,parent:f.parent,task:f.task,date:oe(f.from_time),description:f.description,hours:f.hours,isUpdate:f.hours>0};return e.jsxs("div",{className:"flex gap-x-2 items-center py-1 border-b last:border-b-0",children:[e.jsx(Is,{disabled:f.docstatus==1,data:z,className:"w-10 p-1 h-8",callback:Y,employee:s.employee}),e.jsxs("div",{className:"grid w-full grid-cols-3 ",children:[e.jsx(x,{variant:"p",className:"font-bold ",children:f.taskName}),e.jsx(x,{variant:"p",className:"col-span-2",children:f.description})]})]},G)}),m.length==0&&e.jsx(x,{variant:"p",className:"text-center p-3",children:"No data"})]},p)})}),e.jsx(Me,{})]}),e.jsxs(Le,{className:"sm:justify-start mt-5 flex-col gap-y-4 w-full",children:[e.jsxs(U,{onClick:ee,variant:"success",className:"items-center px-2 gap-x-1",children:[e.jsx(fs,{className:"w-4 h-4"}),"Approve"]}),e.jsx(Ys,{onRejection:se,dates:w,employee:s.employee})]})]})]})},Ys=({onRejection:a,dates:s,employee:t})=>{const r=js({resolver:Ds(Rs),defaultValues:{note:"",employee:t,dates:s},mode:"onSubmit"}),n=u=>{a(u.note)};return c.useEffect(()=>{r.setValue("dates",s)},[s,r]),e.jsxs(gs,{children:[e.jsx(vs,{children:e.jsxs(U,{variant:"destructive",className:"items-center px-2 gap-x-1",children:[e.jsx(ce,{className:"w-4 h-4"}),"Reject"]})}),e.jsxs(ys,{children:[e.jsx(Ns,{children:"Reject timesheet"}),e.jsxs("div",{children:[e.jsx(x,{variant:"p",children:"The following day's timesheet will be rejected"}),e.jsx("ol",{className:"list-disc pl-6",children:s.map((u,i)=>e.jsx("li",{className:"text-sm",children:B(u).date},i))})]}),e.jsx(ws,I(_({},r),{children:e.jsxs("form",{onSubmit:r.handleSubmit(n),children:[e.jsx(bs,{control:r.control,name:"note",render:({field:u})=>e.jsxs(_s,{children:[e.jsx(ks,{htmlFor:"note",children:"Please add reason for rejection."}),e.jsx(Ss,{children:e.jsx(Cs,I(_({},u),{placeholder:"Add a note",rows:4}))}),e.jsx(Ts,_({},u))]})}),e.jsx(Fs,{className:"sm:justify-start my-2",children:e.jsxs(U,{variant:"destructive",type:"submit",className:"items-center px-2 gap-x-1",children:[e.jsx(ce,{className:"w-4 h-4"}),"Reject"]})})]})}))]})]})},nt=()=>{var m,T,P;const{toast:a}=we(),s=de(l=>l.team),t=be(),r=Be(),[n,u]=re("project",[]),[i,o]=re("user-group",[]),[g,y]=re("status",[]);c.useEffect(()=>{t(Je({project:n,userGroup:i,statusFilter:g}))},[]);const{data:N,mutate:F,error:w}=q("frappe.client.get_list",{doctype:"Project",fields:["name","project_name"],or_filters:[["name","like",`%${s.projectSearch}%`],["project_name","like",`%${s.projectSearch}%`]]},"projects",{shouldRetryOnError:!1}),{data:C,error:R,mutate:H}=q("frappe.client.get_list",{doctype:"User Group",or_filters:[["name","like",`%${s.userGroupSearch}%`]]},"user_group",{shouldRetryOnError:!1}),{data:k,isLoading:E,error:W,mutate:Y}=q("timesheet_enhancer.api.team.get_compact_view_data",{date:s.weekDate,max_week:1,page_length:20,project:s.project,user_group:s.userGroup,start:s.start,status_filter:s.statusFilter}),D=[{label:"Not Submitted",value:"Not Submitted"},{label:"Approval Pending",value:"Approval Pending"},{label:"Approved",value:"Approved"},{label:"Rejected",value:"Rejected"}];c.useEffect(()=>{if(s.isFetchAgain&&(Y(),t(ke(!1))),k&&(Object.keys(s.data.data).length>0&&s.data.dates.length>0?t(Qe(k.message)):t(Xe(k.message))),W){const l=O(W);a({variant:"destructive",description:l})}},[k,W,s.isFetchAgain]),c.useEffect(()=>{if(s.projectSearch!==""&&F(),w){const l=O(w);a({variant:"destructive",description:l})}},[s.projectSearch,w]),c.useEffect(()=>{if(s.userGroupSearch!==""&&H(),R){const l=O(R);a({variant:"destructive",description:l})}},[s.userGroupSearch,R]),c.useEffect(()=>{u(s.project)},[u,s.project]),c.useEffect(()=>{y(s.statusFilter)},[y,s.statusFilter]),c.useEffect(()=>{o(s.userGroup)},[o,s.userGroup]);const K=c.useCallback(()=>{const l=fe(je(s.weekDate,-6));t(ge(l))},[t,s.weekDate]),$=c.useCallback(()=>{const l=fe(je(s.weekDate,6));t(ge(l))},[t,s.weekDate]),Z=c.useCallback(l=>{t(Ye(l))},[t]),V=c.useCallback(l=>{t(Ke(l))},[t]),ee=c.useCallback(l=>{const h=Array.isArray(l)?l:[l];t(Ze(h))},[t]),se=()=>{s.hasMore&&t(os(s.start+20))},te=(l,h,v)=>{t(_e({dateRange:{start_date:l,end_date:h},employee:v,isAprrovalDialogOpen:!0}))},d=c.useCallback(l=>{t(es(l))},[t]),p=c.useCallback(l=>{t(ss(l))},[t]);return E?e.jsx(me,{isFull:!0}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-x-2 items-center justify-between mb-3",children:[s.isAprrovalDialogOpen&&e.jsx(Xs,{}),e.jsxs("div",{id:"filters",className:"flex gap-x-2",children:[e.jsx(ae,{value:s.statusFilter,label:"Approval",data:D,isMulti:!0,onSelect:ee,leftIcon:e.jsx(le,{className:j("h-4 w-4",s.statusFilter.length!=0&&"fill-primary")}),rightIcon:s.statusFilter.length>0&&e.jsx(ne,{className:"px-1.5",children:s.statusFilter.length}),className:"text-primary border-dashed gap-x-2 font-normal"}),e.jsx(ae,{value:s.project,label:"Projects",isMulti:!0,showSelected:!1,onSelect:Z,onSearch:d,rightIcon:s.project.length>0&&e.jsx(ne,{className:"px-1.5",children:s.project.length}),leftIcon:e.jsx(le,{className:j("h-4 w-4",s.project.length!=0&&"fill-primary")}),data:N==null?void 0:N.message.map(l=>({label:l.project_name,value:l.name})),className:"text-primary border-dashed gap-x-2 font-normal"}),e.jsx(ae,{value:s.userGroup,label:"User Groups",onSearch:p,showSelected:!1,data:C==null?void 0:C.message.map(l=>({label:l.name,value:l.name})),rightIcon:s.userGroup.length>0&&e.jsx(ne,{className:"px-1.5",children:s.userGroup.length}),isMulti:!0,leftIcon:e.jsx(le,{className:j("h-4 w-4",s.userGroup.length!=0&&"fill-primary")}),onSelect:V,className:"text-primary border-dashed gap-x-2 font-normal"})]}),e.jsxs("div",{id:"date-filter",className:"flex gap-x-2",children:[e.jsx(U,{className:"p-1 h-fit",variant:"outline",onClick:K,children:e.jsx(Os,{className:"w-4 h-4"})}),e.jsx(U,{className:"p-1 h-fit",variant:"outline",onClick:$,children:e.jsx(Ms,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"overflow-y-scroll mb-2",style:{height:"calc(100vh - 8rem)"},children:e.jsxs(De,{children:[e.jsx(Gs,{children:e.jsxs(J,{className:"flex items-center w-full",children:[e.jsx(X,{className:"w-full max-w-md flex items-center",children:"Members"}),(m=s.data)==null?void 0:m.dates.map(l=>{var h;return(h=l==null?void 0:l.dates)==null?void 0:h.map(v=>{const{date:b,day:L}=B(v);return e.jsxs(X,{className:"flex flex-col max-w-20 w-full text-center",children:[e.jsx(x,{variant:"p",className:"text-slate-600",children:L}),e.jsx(x,{variant:"small",className:"text-slate-500",children:b})]},v)})}),e.jsx(X,{className:"w-full max-w-24 flex items-center justify-end",children:"Total"}),e.jsx(X,{className:"w-full max-w-20 flex items-center justify-center",children:e.jsx(ie,{className:"w-4 h-4"})})]})}),e.jsx(Re,{children:Object.entries((T=s.data)==null?void 0:T.data).map(([l,h])=>{let v=0;return e.jsx(J,{className:"flex items-center w-full",children:e.jsx(As,{type:"multiple",className:"w-full",children:e.jsxs(Es,{value:l,className:"border-b-0",children:[e.jsx(Ps,{className:"hover:no-underline py-0",children:e.jsxs("span",{className:"w-full flex ",children:[e.jsx(S,{className:"w-full max-w-md overflow-hidden",children:e.jsxs("span",{className:"flex gap-x-2 items-center font-normal hover:underline w-full",onClick:()=>{r(`${ts}${as}/${h.name}`)},children:[e.jsxs(rs,{className:"w-6 h-6",children:[e.jsx(ls,{src:decodeURIComponent(h.image)}),e.jsx(ns,{children:h.employee_name[0]})]}),e.jsx(x,{variant:"p",className:"w-full text-left text-ellipsis whitespace-nowrap overflow-hidden ",children:h.employee_name})]})}),h.data.map((b,L)=>(v+=b.hour,e.jsx(S,{className:j("flex max-w-20 w-full justify-center items-center"),children:e.jsx(x,{className:j(b.is_leave&&"text-warning",b.hour==0&&"text-primary"),variant:"p",children:b.hour?M(b.hour):"-"})},L))),e.jsx(Zs,{total:v,expected_hour:h.working_hour,frequency:h.working_frequency}),e.jsx(S,{className:"w-full max-w-16 flex items-center justify-end",onClick:()=>{te(h.data[0].date,h.data[h.data.length-1].date,h.name)},children:e.jsx(Ks,{status:h.status})})]})}),e.jsx(Hs,{className:"pb-0",children:e.jsx($s,{employee:h.name})})]})},l)},l)})})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(U,{variant:"outline",onClick:se,disabled:!s.hasMore,children:"Load More"}),e.jsx(x,{variant:"p",className:"px-5 font-semibold",children:`${Object.keys(s.data.data).length|0} of ${((P=k==null?void 0:k.message)==null?void 0:P.total_count)|0}`})]})]})},Ks=({status:a})=>a==="Pending"?e.jsx(Us,{className:"w-4 h-4 stroke-warning "}):a==="Approved"?e.jsx(ie,{className:"w-4 h-4 stroke-success"}):a==="Rejected"?e.jsx(Ls,{className:"w-4 h-4 stroke-error"}):e.jsx(ie,{className:"w-4 h-4 "}),Zs=({total:a,expected_hour:s,frequency:t})=>{const r=cs(a,s,t);return e.jsx(S,{className:j("w-full max-w-24 flex items-center justify-end",r==1&&"text-success",r==2&&"text-warning",r==0&&"text-destructive"),children:M(a)})};export{nt as default};
